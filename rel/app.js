var pxSvgIconString=pxSvgIconString||"";pxSvgIconString+='<g id="face-cool" data-size="22x22" class="hourly-stats-svg-svg ">	<g>		<circle class="st0" cx="10.533" cy="10.533" r="10.533"/></g>	<path class="st1" d="M3.856,13.935c1.242,2.43,3.762,4.097,6.678,4.097s5.436-1.667,6.676-4.097"/><circle class="st2" cx="17.615" cy="7.437" r="1.273"/><circle class="st2" cx="3.416" cy="7.437" r="1.273"/></g><g id="face-warm" data-size="22x22" class="hourly-stats-svg-svg ">	<g>		<circle class="st3" cx="10.533" cy="10.533" r="10.533"/></g>	<line class="st1" x1="5.024" y1="15.286" x2="16.091" y2="15.286"/><circle class="st2" cx="17.614" cy="7.437" r="1.273"/><circle class="st2" cx="3.416" cy="7.437" r="1.273"/></g><g id="face-hot" data-size="22x22" class="hourly-stats-svg-svg ">	<g>		<circle class="st4" cx="10.533" cy="10.533" r="10.533"/></g>	<path class="st1" d="M3.856,16.032c1.242-2.43,3.762-4.097,6.678-4.097s5.436,1.667,6.676,4.097"/><circle class="st2" cx="17.615" cy="7.437" r="1.273"/><circle class="st2" cx="3.416" cy="7.437" r="1.273"/></g>';var pxSvgIconString=pxSvgIconString||"";pxSvgIconString+="",function t(e,i,r){function s(a,o){if(!i[a]){if(!e[a]){var c="function"==typeof require&&require;if(!o&&c)return c(a,!0);if(n)return n(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var l=i[a]={exports:{}};e[a][0].call(l.exports,function(t){var i=e[a][1][t];return s(i?i:t)},l,l.exports,t,e,i,r)}return i[a].exports}for(var n="function"==typeof require&&require,a=0;a<r.length;a++)s(r[a]);return s}({1:[function(t,e,i){var r,s;s=t("misc/stats-utils"),e.exports=r=function(){function t(t,e,i,r){var s;this.height=e,this.vertPadding=i,this.horizPadding=null!=r?r:8,s=4,this.totalHeight=this.height*s+this.vertPadding*(s-1),this.svg=d3.select(t).append("svg").attr({width:200,height:this.totalHeight,"class":"historicsvg small"})}return t.prototype.update=function(t){var e,i,r,n,a,o;i=[],n={};for(a in t)o=t[a],i.push({metric:a,val:o,index:s.getIndexOfMetric(a)}),n[a]=i.length-1;return r=this.svg.selectAll(".small").data(i,function(t){return t.metric}).enter().append("g").attr({transform:function(t){return function(e,i){return"translate(0, "+e.index*(t.height+t.vertPadding)+")"}}(this)}),e=r.selectAll("rect").data(function(t){return t.val}),e.enter().append("rect").attr({width:this.height,height:this.height,x:function(t){return function(e,i){return i*t.horizPadding}}(this)}),e.attr({"class":function(t){return function(t,e,r){return s.getTemperature(t,i[r].metric)}}(this)})},t}()},{"misc/stats-utils":5}],2:[function(t,e,i){var r,s;s=t("misc/stats-utils"),e.exports=r=function(){function t(t){t.padding||(t.padding=3),t.totalHeight||(t.totalHeight=30),t.cssClass||(t.cssClass=""),this.width=t.barWidth,this.height=t.barHeight,this.padding=t.padding,this.svg=d3.select(t.holder).append("svg").attr({width:t.barWidth,height:t.totalHeight,"class":"livesvg "+t.cssClass})}return t.prototype.update=function(t){var e,i,r,n,a;n=this,e=[];for(r in t)a=t[r],null==a&&(a=-1),e.push({metric:r,val:a});return i=this.svg.selectAll("g").data(e),i.enter().append("g").attr({transform:function(t,e){return"translate(0,"+e*(n.height+n.padding)+")"}}).each(function(t,e){return this.trackWidth=n.width,this.trackHeight=n.height,d3.select(this).append("svg:rect").attr({width:this.trackWidth,height:this.trackHeight,"class":"bg"}),d3.select(this).append("svg:rect").attr({width:this.trackWidth,height:this.trackHeight,id:"colored"})}),i.each(function(t,e){var i,r,n;return r=s.getTemperature(t.val,t.metric),n=-1===t.val?0:t.val<.05?.05:t.val<1?t.val.toFixed(4):1,i=d3.select(this).select("#colored"),i.transition().duration(800).attr({width:this.trackWidth*n,"class":r})})},t}()},{"misc/stats-utils":5}],3:[function(t,e,i){var r,s,n,a;n=t("misc/stats-utils"),s=t("views/micro-view"),a=t("views/strip-view"),r=function(){function t(t,e){var i;this.$el=t,this.viewId=e,i=new pxicons.ShadowIcons}return t.prototype.setState=function(t){switch(t){case"micro":return this.component=new s(this.$el);case"strip":return this.component=new a(this.$el)}},t.prototype.initStats=function(t,e){return n.setTypes(t),n.setThresholds(e)},t.prototype.updateLiveStats=function(t){return this.component.updateLiveStats(t)},t.prototype.updateHistoricStat=function(t,e){return this.component.updateHistoricStats(t,e)},t.prototype.build=function(){return this.setState(this.viewId)},t.micro="micro",t.strip="strip",t}(),window.nanobox||(window.nanobox={}),nanobox.HourlyStats=r},{"misc/stats-utils":5,"views/micro-view":6,"views/strip-view":7}],4:[function(t,e,i){var r,s;s=t("jade/face"),e.exports=r=function(){function t(t,e){this.$el=t,this.scalable=e}return t.prototype.update=function(t){var e;if(this.temperature!==t)return this.temperature=t,this.$el.empty(),e=$(s({temperature:t,scalable:this.scalable})),this.$el.append(e),shadowIconsInstance.svgReplaceWithString(pxSvgIconString,e)},t}()},{"jade/face":9}],5:[function(t,e,i){var r,s=[].indexOf||function(t){for(var e=0,i=this.length;i>e;e++)if(e in this&&this[e]===t)return e;return-1};e.exports=r=function(){function t(){}return t.setThresholds=function(e){return null==e&&(e={}),t.thresholds=e},t.setTypes=function(e){return null==e&&(e=[]),t.statTypes=e},t.getIndexOfMetric=function(e){var i,r,s,n,a;for(n=t.statTypes,i=r=0,s=n.length;s>r;i=++r)if(a=n[i],e===a.id)return i;return-1},t.getTemperature=function(e,i){var r;if(null==t.thresholds)return"sleep";switch(r=null!=t.thresholds[i+"_thresholds"]?t.thresholds[i+"_thresholds"]:[.75,.9],!1){case!(0>e):return"sleep";case!(e<r[0]):return"cool";case!(e<r[1]):return"warm";default:return"hot"}},t.getOverallTemperature=function(t){var e,i,r,n,a,o,c,u;e=[];for(r in t)u=t[r],"swap"!==r&&(isNaN(u)||e.push(this.getTemperature(u,r)));if(!e.length)return null;for(a="sleep",o=["cool","warm","hot"],i=0,n=o.length;n>i;i++)c=o[i],s.call(e,c)>=0&&(a=c);return a},t.getTimeArray=function(t,e){var i,r,s,n;for(null==e&&(e=25),n=[],i=r=0,s=e;s>=0?s>r:r>s;i=s>=0?++r:--r)n.unshift(this.getTimeObject(t--)),-1===t&&(t=23);return n},t.getTimeObject=function(t){switch(!1){case 0!==t:return{hour:12,period:"am",military:t};case!(12>t):return{hour:t,period:"am",military:t};case 12!==t:return{hour:12,period:"pm",military:t};case!(t>12):return{hour:t-12,period:"pm",military:t}}},t.padNumber=function(t,e){var i;for(i=""+t;i.length<e;)i="0"+i;return i},t.getTimeStampsFromPercentage=function(t){var e,i,r;return t=1-t,r=this.getLastWholeHour(),i=r.setHours(r.getHours()-Math.round(144*t)),e=r.setHours(r.getHours()-24),[e,i]},t.get24hrRangeStartingLastHour=function(){return this.getTimeStampsFromPercentage(1)},t.getLastWholeHour=function(){var t;return t=new Date,t.setHours(t.getHours()-1),t.setMinutes(0),t.setSeconds(0),t.setMilliseconds(0),t},t.getNextHour=function(t){var e;return e=t+1,e>12?e-12:e},t.normalizeHistoricalData=function(t,e){var i,r,s,n,a,o,c,u,l,d,h,p;for(u=new Date,u.setHours(u.getHours()-1),u.setMinutes(0),u.setSeconds(0),a=Math.round((u-new Date(e[0]))/36e5),n=Math.round((u-new Date(e[1]))/36e5),h=a,s=n,i=[],o=c=l=s,d=h;d>=c;o=c+=1)null!=t[o]&&(r=t[o],p=new Date(r.time).setMinutes(0),i[h-o]=r.value);return i},t.normalizeHourlyData=function(e){var i,r,s,n,a,o,c,u;for(i=[],r=s=0;24>s;r=++s)for(u=[0,15,30,45],n=0,o=u.length;o>n;n++)c=u[n],a=t.padNumber(r,2)+":"+t.padNumber(c,2),i.push(e[a]||0);return i},t.fillGapsInHistoricalData=function(t,e){var i,r,s,n,a,o,c,u,l,d,h;for(null==e&&(e=!0),n=e?25:168,l=new Date,l.setHours(l.getHours()-1),l.setMinutes(0),l.setSeconds(0),h=l.getTime(),i=[],a=o=0,d=n;d>=0?d>o:o>d;a=d>=0?++o:--o)i[a]={time:h,value:-1},h-=36e5;for(c=0,u=t.length;u>c;c++)r=t[c],s=Math.round((l-new Date(r.time))/36e5),i[s]=r;return i},t}()},{}],6:[function(t,e,i){var r,s,n,a,o,c,u=function(t,e){function i(){this.constructor=t}for(var r in e)l.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},l={}.hasOwnProperty;o=t("views/view"),a=t("misc/stats-utils"),s=t("d3/now-horizontal"),r=t("misc/face"),c=t("jade/micro-view"),e.exports=n=function(t){function e(t){this.$node=$(c({stats:a.statTypes})),t.append(this.$node),this.addLiveStats(),this.addFace()}return u(e,t),e.prototype.addLiveStats=function(){return this.liveStats=new s({barWidth:40,barHeight:5,padding:3,totalHeight:29,holder:$(".graphs",this.$node)[0]})},e.prototype.addFace=function(){return this.face=new r($(".face",this.$node),"true")},e.prototype.updateLiveStats=function(t){return this.face.update(a.getOverallTemperature(t)),this.liveStats.update(t)},e}(o)},{"d3/now-horizontal":2,"jade/micro-view":10,"misc/face":4,"misc/stats-utils":5,"views/view":8}],7:[function(t,e,i){var r,s,n,a,o,c,u,l,d=function(t,e){function i(){this.constructor=t}for(var r in e)h.call(e,r)&&(t[r]=e[r]);return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t},h={}.hasOwnProperty;c=t("views/view"),a=t("misc/stats-utils"),n=t("d3/now-horizontal"),s=t("d3/historical-small"),r=t("misc/face"),l=t("jade/strip-view"),u=t("jade/percentages"),e.exports=o=function(t){function e(t){var e,i;this.$node=$(l({stats:a.statTypes})),this.$percentages=$(".percentages",this.$node),t.append(this.$node),e=5,i=5,this.addHistoricStats(e,i),this.addLiveStats(e,i),this.addFace()}return d(e,t),e.prototype.addHistoricStats=function(t,e){return this.historicStats=new s($(".historic",this.$node)[0],t,e)},e.prototype.addLiveStats=function(t,e){var i;return i={barWidth:50,barHeight:t,padding:e,totalHeight:4*t+3*e,holder:$(".graphs",this.$node)[0]},this.liveStats=new n(i)},e.prototype.addFace=function(){return this.face=new r($(".face",this.$node),"true")},e.prototype.updateLiveStats=function(t){return this.face.update(a.getOverallTemperature(t)),this.liveStats.update(t),this.updateLivePercentages(t)},e.prototype.updateHistoricStats=function(t,e){var i,r;return i={},r=a.get24hrRangeStartingLastHour(),e=a.fillGapsInHistoricalData(e),i[t]=a.normalizeHistoricalData(e,r),this.historicStats.update(i)},e.prototype.updateLivePercentages=function(t){var e,i,r;e=[];for(i in t)r=t[i],e.push(Math.round(100*r));return console.log(e),this.$percentages.empty(),this.$percentages.append($(u({percentages:e})))},e}(c)},{"d3/historical-small":1,"d3/now-horizontal":2,"jade/percentages":11,"jade/strip-view":12,"misc/face":4,"misc/stats-utils":5,"views/view":8}],8:[function(t,e,i){var r;e.exports=r=function(){function t(){}return t}()},{}],9:[function(t,e,i){e.exports=function(t){var e=[],i=t||{};return function(t,i){e.push('<div class="faceholder"><img'+jade.attr("scalable",""+t,!0,!1)+jade.attr("data-src","face-"+i,!0,!1)+' class="shadow-icon"/></div>')}.call(this,"scalable"in i?i.scalable:"undefined"!=typeof scalable?scalable:void 0,"temperature"in i?i.temperature:"undefined"!=typeof temperature?temperature:void 0),e.join("")}},{}],10:[function(t,e,i){e.exports=function(t){var e,i=[],r=t||{};return function(t,r){i.push('<div class="micro-view"><div class="labels">'),function(){var r=t;if("number"==typeof r.length)for(var s=0,n=r.length;n>s;s++){var a=r[s];i.push('<div class="stat">'+jade.escape(null==(e=a.nickname)?"":e)+"</div>")}else{var n=0;for(var s in r){n++;var a=r[s];i.push('<div class="stat">'+jade.escape(null==(e=a.nickname)?"":e)+"</div>")}}}.call(this),i.push('</div><div class="graphs"></div><div class="face"></div></div>')}.call(this,"stats"in r?r.stats:"undefined"!=typeof stats?stats:void 0,"undefined"in r?r.undefined:void 0),i.join("")}},{}],11:[function(t,e,i){e.exports=function(t){var e,i=[],r=t||{};return function(t,r){(function(){var r=t;if("number"==typeof r.length)for(var s=0,n=r.length;n>s;s++){var a=r[s];i.push('<div class="val">'+jade.escape(null==(e=a)?"":e)+"%</div>")}else{var n=0;for(var s in r){n++;var a=r[s];i.push('<div class="val">'+jade.escape(null==(e=a)?"":e)+"%</div>")}}}).call(this)}.call(this,"percentages"in r?r.percentages:"undefined"!=typeof percentages?percentages:void 0,"undefined"in r?r.undefined:void 0),i.join("")}},{}],12:[function(t,e,i){e.exports=function(t){var e,i=[],r=t||{};return function(t,r){i.push('<div class="strip-view"><div class="labels">'),function(){var r=t;if("number"==typeof r.length)for(var s=0,n=r.length;n>s;s++){var a=r[s];i.push('<div class="stat">'+jade.escape(null==(e=a.nickname)?"":e)+"</div>")}else{var n=0;for(var s in r){n++;var a=r[s];i.push('<div class="stat">'+jade.escape(null==(e=a.nickname)?"":e)+"</div>")}}}.call(this),i.push('</div><div class="historic"></div><div class="divider"></div><div class="graphs"></div><div class="percentages"></div><div class="face"></div></div>')}.call(this,"stats"in r?r.stats:"undefined"!=typeof stats?stats:void 0,"undefined"in r?r.undefined:void 0),i.join("")}},{}]},{},[3]);